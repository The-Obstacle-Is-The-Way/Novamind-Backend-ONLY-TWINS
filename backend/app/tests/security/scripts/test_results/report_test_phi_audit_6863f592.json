{"created": 1744671640.7648141, "duration": 0.15772318840026855, "exitcode": 1, "root": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend", "environment": {}, "summary": {"passed": 8, "failed": 3, "total": 11, "collected": 11}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "app/tests/security/audit/test_phi_audit.py", "type": "Module"}]}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit", "outcome": "passed", "result": [{"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_detects_phi_in_code", "type": "Function", "lineno": 105}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_detects_unsanitized_logging", "type": "Function", "lineno": 122}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_detects_unprotected_api_endpoints", "type": "Function", "lineno": 131}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_detects_missing_security_config", "type": "Function", "lineno": 148}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_report_generation", "type": "Function", "lineno": 169}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_full_audit_execution", "type": "Function", "lineno": 193}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_save_to_json_method", "type": "Function", "lineno": 206}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_clean_app_directory_special_case", "type": "Function", "lineno": 310}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_with_clean_files", "type": "Function", "lineno": 262}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_ssn_pattern_detection", "type": "Function", "lineno": 343}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_performance_with_large_codebase", "type": "Function", "lineno": 391}]}, {"nodeid": "app/tests/security/audit/test_phi_audit.py", "outcome": "passed", "result": [{"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit", "type": "Class"}]}], "tests": [{"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_detects_phi_in_code", "lineno": 105, "outcome": "passed", "keywords": ["test_audit_detects_phi_in_code", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.0027194999856874347, "outcome": "passed", "stdout": "Loaded test environment variables from: /Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/.env.test\n"}, "call": {"duration": 0.0013293329975567758, "outcome": "passed", "log": [{"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp4ycrb270/app/domain/patient.py: SSN - 123-45-6789", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.623765, "msecs": 623.0, "relativeCreated": 100.261, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp4ycrb270/app/domain/patient.py: Email - john.smith@example.com", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.623889, "msecs": 623.0, "relativeCreated": 100.385, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 1 files with PHI issues out of 5 examined.", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 567, "funcName": "audit_code_for_phi", "created": 1744671640.624085, "msecs": 624.0, "relativeCreated": 100.581, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}]}, "teardown": {"duration": 0.0009544999920763075, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_detects_unsanitized_logging", "lineno": 122, "outcome": "passed", "keywords": ["test_audit_detects_unsanitized_logging", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.001043915981426835, "outcome": "passed"}, "call": {"duration": 7.212499622255564e-05, "outcome": "passed"}, "teardown": {"duration": 0.0008634169935248792, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_detects_unprotected_api_endpoints", "lineno": 131, "outcome": "passed", "keywords": ["test_audit_detects_unprotected_api_endpoints", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.0009969589882530272, "outcome": "passed"}, "call": {"duration": 0.0003930410020984709, "outcome": "passed", "log": [{"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp49bqbmnx/app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 411, "funcName": "audit_api_endpoints", "created": 1744671640.628761, "msecs": 628.0, "relativeCreated": 105.257, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp49bqbmnx/app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 454, "funcName": "audit_api_endpoints", "created": 1744671640.6289642, "msecs": 628.0, "relativeCreated": 105.46, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}]}, "teardown": {"duration": 0.0008298339671455324, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_detects_missing_security_config", "lineno": 148, "outcome": "passed", "keywords": ["test_audit_detects_missing_security_config", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.0011338329641148448, "outcome": "passed"}, "call": {"duration": 0.0002234170096926391, "outcome": "passed", "log": [{"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpl1zra224/app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 496, "funcName": "audit_configuration", "created": 1744671640.631288, "msecs": 631.0, "relativeCreated": 107.784, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpl1zra224/app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT, encryption", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 544, "funcName": "audit_configuration", "created": 1744671640.6313689, "msecs": 631.0, "relativeCreated": 107.865, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}]}, "teardown": {"duration": 0.0008707919623702765, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_report_generation", "lineno": 169, "outcome": "passed", "keywords": ["test_audit_report_generation", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.0012059580185450613, "outcome": "passed"}, "call": {"duration": 0.00213199999416247, "outcome": "passed", "log": [{"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpi0r4_c7f/app/domain/patient.py: SSN - 123-45-6789", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.634306, "msecs": 634.0, "relativeCreated": 110.802, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpi0r4_c7f/app/domain/patient.py: Email - john.smith@example.com", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.634393, "msecs": 634.0, "relativeCreated": 110.889, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 1 files with PHI issues out of 5 examined.", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 567, "funcName": "audit_code_for_phi", "created": 1744671640.634581, "msecs": 634.0, "relativeCreated": 111.077, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpi0r4_c7f/app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 411, "funcName": "audit_api_endpoints", "created": 1744671640.634737, "msecs": 634.0, "relativeCreated": 111.233, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpi0r4_c7f/app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 454, "funcName": "audit_api_endpoints", "created": 1744671640.634806, "msecs": 634.0, "relativeCreated": 111.302, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpi0r4_c7f/app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 496, "funcName": "audit_configuration", "created": 1744671640.6348622, "msecs": 634.0, "relativeCreated": 111.358, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpi0r4_c7f/app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT, encryption", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 544, "funcName": "audit_configuration", "created": 1744671640.6349099, "msecs": 634.0, "relativeCreated": 111.406, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 5 issues in 5 files.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 639, "funcName": "run_audit", "created": 1744671640.635678, "msecs": 635.0, "relativeCreated": 112.174, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}]}, "teardown": {"duration": 0.0009580000187270343, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_full_audit_execution", "lineno": 193, "outcome": "passed", "keywords": ["test_full_audit_execution", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.0011008750298060477, "outcome": "passed"}, "call": {"duration": 0.0011699579772539437, "outcome": "passed", "log": [{"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpgh6u017s/app/domain/patient.py: SSN - 123-45-6789", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.6386712, "msecs": 638.0, "relativeCreated": 115.167, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpgh6u017s/app/domain/patient.py: Email - john.smith@example.com", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.638725, "msecs": 638.0, "relativeCreated": 115.221, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 1 files with PHI issues out of 5 examined.", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 567, "funcName": "audit_code_for_phi", "created": 1744671640.638895, "msecs": 638.0, "relativeCreated": 115.391, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpgh6u017s/app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 411, "funcName": "audit_api_endpoints", "created": 1744671640.638998, "msecs": 638.0, "relativeCreated": 115.494, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpgh6u017s/app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 454, "funcName": "audit_api_endpoints", "created": 1744671640.6390588, "msecs": 639.0, "relativeCreated": 115.555, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpgh6u017s/app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 496, "funcName": "audit_configuration", "created": 1744671640.639104, "msecs": 639.0, "relativeCreated": 115.6, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpgh6u017s/app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT, encryption", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 544, "funcName": "audit_configuration", "created": 1744671640.639149, "msecs": 639.0, "relativeCreated": 115.645, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 5 issues in 5 files.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 639, "funcName": "run_audit", "created": 1744671640.6393752, "msecs": 639.0, "relativeCreated": 115.871, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}]}, "teardown": {"duration": 0.0008969579939730465, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_save_to_json_method", "lineno": 206, "outcome": "passed", "keywords": ["test_save_to_json_method", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.001198749989271164, "outcome": "passed"}, "call": {"duration": 0.0013902500504627824, "outcome": "passed", "stdout": "Report saved to /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpqc8o55to/audit-report.json\n", "log": [{"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpqc8o55to/app/domain/patient.py: SSN - 123-45-6789", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.642284, "msecs": 642.0, "relativeCreated": 118.78, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpqc8o55to/app/domain/patient.py: Email - john.smith@example.com", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.642346, "msecs": 642.0, "relativeCreated": 118.842, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 1 files with PHI issues out of 5 examined.", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 567, "funcName": "audit_code_for_phi", "created": 1744671640.642516, "msecs": 642.0, "relativeCreated": 119.012, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpqc8o55to/app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 411, "funcName": "audit_api_endpoints", "created": 1744671640.642619, "msecs": 642.0, "relativeCreated": 119.115, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpqc8o55to/app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 454, "funcName": "audit_api_endpoints", "created": 1744671640.642682, "msecs": 642.0, "relativeCreated": 119.178, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpqc8o55to/app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 496, "funcName": "audit_configuration", "created": 1744671640.642726, "msecs": 642.0, "relativeCreated": 119.222, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpqc8o55to/app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT, encryption", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 544, "funcName": "audit_configuration", "created": 1744671640.642771, "msecs": 642.0, "relativeCreated": 119.267, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 5 issues in 5 files.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 639, "funcName": "run_audit", "created": 1744671640.642987, "msecs": 642.0, "relativeCreated": 119.483, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}]}, "teardown": {"duration": 0.0009310829918831587, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_clean_app_directory_special_case", "lineno": 310, "outcome": "failed", "keywords": ["test_clean_app_directory_special_case", "__wrapped__", "patchings", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.0001587910228408873, "outcome": "passed"}, "call": {"duration": 0.0003552500274963677, "outcome": "failed", "crash": {"path": "<frozen importlib._bootstrap>", "lineno": 1324, "message": "ModuleNotFoundError: No module named 'backend'"}, "traceback": [{"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", "lineno": 1421, "message": ""}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", "lineno": 141, "message": "in __enter__"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", "lineno": 1403, "message": "in decoration_helper"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", "lineno": 530, "message": "in enter_context"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", "lineno": 1479, "message": "in __enter__"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py", "lineno": 513, "message": "in resolve_name"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", "lineno": 88, "message": "ModuleNotFoundError"}], "longrepr": "args = (<test_phi_audit.TestPHIAudit object at 0x1073e2350>,)\nkeywargs = {'temp_dir': '/var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpmbettqa4'}\n\n    @wraps(func)\n    def patched(*args, **keywargs):\n>       with self.decoration_helper(patched,\n                                    args,\n                                    keywargs) as (newargs, newkeywargs):\n\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1421: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__\n    return next(self.gen)\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1403: in decoration_helper\n    arg = exit_stack.enter_context(patching)\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context\n    result = _enter(cm)\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1479: in __enter__\n    self.target = self.getter()\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:513: in resolve_name\n    mod = importlib.import_module(modname)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nname = 'backend', package = None\n\n    def import_module(name, package=None):\n        \"\"\"Import a module.\n    \n        The 'package' argument is required when performing a relative import. It\n        specifies the package to use as the anchor point from which to resolve the\n        relative import to an absolute import.\n    \n        \"\"\"\n        level = 0\n        if name.startswith('.'):\n            if not package:\n                raise TypeError(\"the 'package' argument is required to perform a \"\n                                f\"relative import for {name!r}\")\n            for character in name:\n                if character != '.':\n                    break\n                level += 1\n>       return _bootstrap._gcd_import(name[level:], package, level)\nE       ModuleNotFoundError: No module named 'backend'\n\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: ModuleNotFoundError"}, "teardown": {"duration": 0.00023199996212497354, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_audit_with_clean_files", "lineno": 262, "outcome": "failed", "keywords": ["test_audit_with_clean_files", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.00021049997303634882, "outcome": "passed"}, "call": {"duration": 0.002246333984658122, "outcome": "failed", "crash": {"path": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/app/tests/security/audit/test_phi_audit.py", "lineno": 308, "message": "assert 4 == 0\n +  where 4 = _count_total_issues()\n +    where _count_total_issues = <scripts.test.security.run_hipaa_phi_audit.PHIAuditor object at 0x1073fae00>._count_total_issues"}, "traceback": [{"path": "audit/test_phi_audit.py", "lineno": 308, "message": "AssertionError"}], "log": [{"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 0 files with PHI issues out of 2 examined.", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 567, "funcName": "audit_code_for_phi", "created": 1744671640.704556, "msecs": 704.0, "relativeCreated": 181.052, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpxe628sh1/clean_app_no_phi/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 411, "funcName": "audit_api_endpoints", "created": 1744671640.705099, "msecs": 705.0, "relativeCreated": 181.595, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpxe628sh1/clean_app_no_phi/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 454, "funcName": "audit_api_endpoints", "created": 1744671640.705193, "msecs": 705.0, "relativeCreated": 181.689, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpxe628sh1/clean_app_no_phi/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 496, "funcName": "audit_configuration", "created": 1744671640.7054021, "msecs": 705.0, "relativeCreated": 181.898, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpxe628sh1/clean_app_no_phi/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT, encryption", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 544, "funcName": "audit_configuration", "created": 1744671640.70546, "msecs": 705.0, "relativeCreated": 181.956, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. 4 issues allowed due to special case in 4 files.", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 637, "funcName": "run_audit", "created": 1744671640.705591, "msecs": 705.0, "relativeCreated": 182.087, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}], "longrepr": "self = <test_phi_audit.TestPHIAudit object at 0x1073e2650>\ntemp_dir = '/var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmpxe628sh1'\n\n        def test_audit_with_clean_files(self, temp_dir):\n            \"\"\"Test that the audit passes when given clean files (no PHI).\"\"\"\n            # Create a directory structure with clean files\n            clean_dir = os.path.join(temp_dir, \"clean_app_no_phi\")\n            os.makedirs(os.path.join(clean_dir, \"domain\"))\n            os.makedirs(os.path.join(clean_dir, \"infrastructure\", \"security\"))\n    \n            # Create sample files with no PHI\n            files_to_create = {\n                os.path.join(clean_dir, \"domain\", \"user.py\"): '''class User:\n        \"\"\"User entity without PHI.\"\"\"\n    \n        def __init__(self, user_id, role):\n            self.user_id = user_id  # UUID like \"550e8400-e29b-41d4-a716-446655440000\"\n            self.role = role        # \"admin\" or \"patient\"\n    ''',\n                os.path.join(clean_dir, \"infrastructure\", \"security\", \"sanitizer.py\"): '''\n    import re\n    import logging\n    class Sanitizer:\n        \"\"\"Sanitizes sensitive data from log messages.\"\"\"\n    \n        def sanitize(self, message):\n            # Proper sanitization\n            return message.replace(\"sensitive\", \"[REDACTED]\")\n    '''\n            }\n    \n            # Write files\n            for file_path, content in files_to_create.items():\n                os.makedirs(os.path.dirname(file_path), exist_ok=True)\n                with open(file_path, \"w\") as f:\n                    f.write(content)\n    \n            # Run the audit on the clean directory\n            auditor = PHIAuditor(app_dir=clean_dir)\n            result = auditor.run_audit()\n    \n            # Verify the audit passes with clean files\n            assert result is True, \"Audit should pass for directories with clean files\"\n    \n            # Check if findings are empty or minimal\n            assert len(auditor.findings.get(\"code_phi\", [])) == 0, \"Should not find PHI in clean files\"\n    \n            # Verify summary contains correct counts\n>           assert auditor._count_total_issues() == 0\nE           assert 4 == 0\nE            +  where 4 = _count_total_issues()\nE            +    where _count_total_issues = <scripts.test.security.run_hipaa_phi_audit.PHIAuditor object at 0x1073fae00>._count_total_issues\n\naudit/test_phi_audit.py:308: AssertionError"}, "teardown": {"duration": 0.0009571250411681831, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_ssn_pattern_detection", "lineno": 343, "outcome": "failed", "keywords": ["test_ssn_pattern_detection", "__wrapped__", "patchings", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.00018262502271682024, "outcome": "passed"}, "call": {"duration": 0.00020758301252499223, "outcome": "failed", "crash": {"path": "<frozen importlib._bootstrap>", "lineno": 1324, "message": "ModuleNotFoundError: No module named 'backend'"}, "traceback": [{"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", "lineno": 1421, "message": ""}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", "lineno": 141, "message": "in __enter__"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", "lineno": 1403, "message": "in decoration_helper"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", "lineno": 530, "message": "in enter_context"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", "lineno": 1479, "message": "in __enter__"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py", "lineno": 513, "message": "in resolve_name"}, {"path": "/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", "lineno": 88, "message": "ModuleNotFoundError"}], "longrepr": "args = (<test_phi_audit.TestPHIAudit object at 0x1073f1b80>,)\nkeywargs = {'temp_dir': '/var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp9hf006k2'}\n\n    @wraps(func)\n    def patched(*args, **keywargs):\n>       with self.decoration_helper(patched,\n                                    args,\n                                    keywargs) as (newargs, newkeywargs):\n\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1421: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__\n    return next(self.gen)\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1403: in decoration_helper\n    arg = exit_stack.enter_context(patching)\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context\n    result = _enter(cm)\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1479: in __enter__\n    self.target = self.getter()\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:513: in resolve_name\n    mod = importlib.import_module(modname)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nname = 'backend', package = None\n\n    def import_module(name, package=None):\n        \"\"\"Import a module.\n    \n        The 'package' argument is required when performing a relative import. It\n        specifies the package to use as the anchor point from which to resolve the\n        relative import to an absolute import.\n    \n        \"\"\"\n        level = 0\n        if name.startswith('.'):\n            if not package:\n                raise TypeError(\"the 'package' argument is required to perform a \"\n                                f\"relative import for {name!r}\")\n            for character in name:\n                if character != '.':\n                    break\n                level += 1\n>       return _bootstrap._gcd_import(name[level:], package, level)\nE       ModuleNotFoundError: No module named 'backend'\n\n/opt/homebrew/Cellar/python@3.13/3.13.2/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py:88: ModuleNotFoundError"}, "teardown": {"duration": 0.0002353329909965396, "outcome": "passed"}}, {"nodeid": "app/tests/security/audit/test_phi_audit.py::TestPHIAudit::test_performance_with_large_codebase", "lineno": 391, "outcome": "passed", "keywords": ["test_performance_with_large_codebase", "TestPHIAudit", "db_required", "test_phi_audit.py", "audit", "security", "tests", "app", "backend", ""], "setup": {"duration": 0.00018137501319870353, "outcome": "passed"}, "call": {"duration": 0.008229708997532725, "outcome": "passed", "log": [{"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI pattern detected in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp3zpdn0bi/large_app/phi_file.py: SSN - 123-45-6789", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 325, "funcName": "scan_file", "created": 1744671640.758946, "msecs": 758.0, "relativeCreated": 235.442, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 1 files with PHI issues out of 51 examined.", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 567, "funcName": "audit_code_for_phi", "created": 1744671640.759757, "msecs": 759.0, "relativeCreated": 236.253, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp3zpdn0bi/large_app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 411, "funcName": "audit_api_endpoints", "created": 1744671640.760246, "msecs": 760.0, "relativeCreated": 236.742, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "API security issue found in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp3zpdn0bi/large_app/presentation/api/v1/endpoints/patients.py", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 454, "funcName": "audit_api_endpoints", "created": 1744671640.760412, "msecs": 760.0, "relativeCreated": 236.908, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp3zpdn0bi/large_app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 496, "funcName": "audit_configuration", "created": 1744671640.7606158, "msecs": 760.0, "relativeCreated": 237.112, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "Missing security settings in /var/folders/3p/t86zsht91l3gsdpddkqg_kfh0000gn/T/tmp3zpdn0bi/large_app/core/config.py: JWT_SECRET, ENCRYPTION_KEY, SSL_CERT, AUTH_REQUIRED, HIPAA_COMPLIANT, encryption", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 544, "funcName": "audit_configuration", "created": 1744671640.76067, "msecs": 760.0, "relativeCreated": 237.166, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}, {"name": "scripts.test.security.run_hipaa_phi_audit", "msg": "PHI audit complete. Found 5 issues in 53 files.", "args": null, "levelname": "WARNING", "levelno": 30, "pathname": "/Users/ray/Desktop/GITHUB/Novamind-Backend-ONLY-TWINS/backend/scripts/test/security/run_hipaa_phi_audit.py", "filename": "run_hipaa_phi_audit.py", "module": "run_hipaa_phi_audit", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 639, "funcName": "run_audit", "created": 1744671640.7617412, "msecs": 761.0, "relativeCreated": 238.237, "thread": 8631733312, "threadName": "MainThread", "processName": "MainProcess", "process": 31190, "taskName": null, "asctime": "2025-04-14 19:00:40"}]}, "teardown": {"duration": 0.00272958300774917, "outcome": "passed"}}]}